(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(2978)}])},5141:function(e,n,r){"use strict";r.d(n,{Z:function(){return h}});var t=r(5893),i=(r(7294),r(7690)),a=r(189),s=r(6979),o=r(1163);function c(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){c(e,n,r[n])}))}return e}function u(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d=function(e){var n=e.fill,r=void 0===n?"currentColor":n,i=e.size,a=e.height,s=e.width,o=u(e,["fill","size","height","width"]);return(0,t.jsx)("div",{style:{cursor:"pointer"},children:(0,t.jsxs)("svg",l({width:i||s||24,height:i||a||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{children:[(0,t.jsx)("path",{d:"M16.25 22.5C17.2165 22.5 18 21.7165 18 20.75C18 19.7835 17.2165 19 16.25 19C15.2835 19 14.5 19.7835 14.5 20.75C14.5 21.7165 15.2835 22.5 16.25 22.5Z",fill:r}),(0,t.jsx)("path",{d:"M8.25 22.5C9.2165 22.5 10 21.7165 10 20.75C10 19.7835 9.2165 19 8.25 19C7.2835 19 6.5 19.7835 6.5 20.75C6.5 21.7165 7.2835 22.5 8.25 22.5Z",fill:r}),(0,t.jsx)("path",{d:"M4.84 3.94L4.64 6.39C4.6 6.86 4.97 7.25 5.44 7.25H20.75C21.17 7.25 21.52 6.93 21.55 6.51C21.68 4.74 20.33 3.3 18.56 3.3H6.27C6.17 2.86 5.97 2.44 5.66 2.09C5.16 1.56 4.46 1.25 3.74 1.25H2C1.59 1.25 1.25 1.59 1.25 2C1.25 2.41 1.59 2.75 2 2.75H3.74C4.05 2.75 4.34 2.88 4.55 3.1C4.76 3.33 4.86 3.63 4.84 3.94Z",fill:r}),(0,t.jsx)("path",{d:"M20.5101 8.75H5.17005C4.75005 8.75 4.41005 9.07 4.37005 9.48L4.01005 13.83C3.87005 15.54 5.21005 17 6.92005 17H18.0401C19.5401 17 20.8601 15.77 20.9701 14.27L21.3001 9.6C21.3401 9.14 20.9801 8.75 20.5101 8.75Z",fill:r})]}))})},h=function(e){var n=e.title,r=e.user,c=e.cart,l=(0,o.useRouter)();return(0,t.jsxs)("div",{className:"header",children:[r.logged&&(0,t.jsxs)("div",{className:"logout-button",children:[(0,t.jsxs)(i.ZP,{className:"logout-button",onClick:function(){return l.push("/api/logout")},children:["Cerrar Session (",r.name,")"]}),c&&(0,t.jsx)(a.ZP,{css:{cursor:"pointer"},color:"warning",content:c.products.length,shape:"circle",children:(0,t.jsx)(d,{fill:"white",size:30,width:24,height:24,onClick:function(){return l.push("/cart")}})})]}),(0,t.jsx)(s.Z,{className:"header-text",children:n})]})}},2978:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSP:function(){return C},default:function(){return m}});var t=r(5893),i=r(7294),a=r(3165),s=r(2553),o=r(1713),c=r(5141),l=r(4051),u=r.n(l),d=r(2049),h=r(6979),f=r(7690),j=r(7501);function x(e,n,r,t,i,a,s){try{var o=e[a](s),c=o.value}catch(l){return void r(l)}o.done?n(c):Promise.resolve(c).then(t,i)}var g=function(e){var n=e.setEditing,r=function(e){return e.toISOString().split("T")[0]},o=(0,i.useState)(""),c=o[0],l=o[1],g=(0,i.useState)(""),p=g[0],v=g[1],C=(0,i.useState)(""),m=C[0],Z=C[1],b=(0,i.useState)(""),w=b[0],P=b[1],y=(0,i.useState)({error:null,loading:!1,done:!1}),O=y[0],S=y[1],D=r(new Date),N=function(){var e,n=(e=u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S({error:null,done:!1,loading:!0}),e.next=4,fetch("/api/admin/cart/dates",{method:"POST",body:JSON.stringify({openDate:c,closeDate:p})});case 4:S({error:null,loading:!1,done:!0}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),S({error:"Ocurri\xf3 un error enviando las fechas",loading:!1,done:!0}),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})),function(){var n=this,r=arguments;return new Promise((function(t,i){var a=e.apply(n,r);function s(e){x(a,t,i,s,o,"next",e)}function o(e){x(a,t,i,s,o,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,t.jsxs)(a.Z,{children:[(0,t.jsxs)(s.ZP.Container,{gap:3,justify:"center",children:[(0,t.jsxs)(s.ZP,{children:[(0,t.jsx)(d.ZP,{type:"date",label:"Nueva fecha de apertura",min:D,value:c,onChange:function(e){Z(""),P(""),l(e.target.value);var n=new Date(e.target.value);n.setDate(n.getDate()+1),v(r(n))}}),(0,t.jsx)(h.Z,{color:"error",children:m})]}),(0,t.jsxs)(s.ZP,{children:[(0,t.jsx)(d.ZP,{type:"date",label:"Nueva fecha de cierre",disabled:""===c,min:function(){if(!c)return"";var e=new Date(c);return e.setDate(e.getDate()+1),r(e)}(),value:p,onChange:function(e){P(""),v(e.target.value)}}),(0,t.jsx)(h.Z,{color:"error",children:w})]})]}),(0,t.jsx)(f.ZP,{onClick:function(){return n(!1)},className:O.loading?"button-total-disabled":"button-cancel",children:"Cancelar"}),(0,t.jsx)(f.ZP,{onClick:function(){(function(){Z(""),P("");var e=!0;return c||(Z("Debe ingresar una fecha de apertura"),e=!1),p||(P("Debe ingresar una fecha de cierre"),e=!1),c&&p&&new Date(p)<=new Date(c)&&(P("La fecha de cierre debe ser mayor que la de apertura"),e=!1),e})()&&N()},className:O.loading?"button-total-disabled":"button-total",children:"Confirmar"}),(0,t.jsxs)(s.ZP.Container,{gap:2,direction:"column",justify:"center",children:[O.loading&&(0,t.jsx)(j.ZP,{color:"warning"}),O.done&&(O.error?(0,t.jsx)(h.Z,{children:O.error}):(0,t.jsx)(h.Z,{children:"Las fechas se guardaron exitosamente"}))]})]})},p=function(e){var n=e.ordersCount;return(0,t.jsx)(a.Z,{children:(0,t.jsxs)(s.ZP.Container,{justify:"center",direction:"column",alignItems:"center",children:[(0,t.jsx)(h.Z,{h3:!0,children:"Pedidos realizados hasta ahora"}),(0,t.jsx)(h.Z,{h2:!0,children:n}),(0,t.jsx)(f.ZP,{className:"button-total",children:"Enviar pedidos"})]})})},v=function(e){var n=e.status,r=e.setEditing;return(0,t.jsx)(a.Z,{children:(0,t.jsxs)(s.ZP.Container,{justify:"center",direction:"column",alignItems:"center",children:[(0,t.jsx)(h.Z,{h3:!0,children:"Estado actual del carrito"}),(0,t.jsx)(h.Z,{h4:!0,children:{open:"Abierto",toOpen:"Abre pronto",closed:"Cerrado"}[n.status]}),(0,t.jsxs)(s.ZP.Container,{justify:"space-around",children:[(0,t.jsx)(s.ZP,{children:(0,t.jsxs)(h.Z,{children:["Fecha de apertura: ",(0,t.jsx)("strong",{children:n.openDate})]})}),(0,t.jsx)(s.ZP,{children:(0,t.jsxs)(h.Z,{children:["Fecha de cierre: ",(0,t.jsx)("strong",{children:n.closeDate})]})})]}),(0,t.jsx)(f.ZP,{onClick:function(){return r(!0)},className:"button-total",children:"Editar fechas"})]})})},C=!0;function m(e){var n=(0,i.useState)(!1),r=n[0],l=n[1];return(0,t.jsxs)(o.default,{children:[(0,t.jsx)(c.Z,{user:e.user,title:"Panel de administrador"}),(0,t.jsx)(a.Z,{children:(0,t.jsxs)(s.ZP.Container,{justify:"center",alignItems:"center",gap:4,children:[(0,t.jsx)(s.ZP,{xs:12,sm:10,md:6,lg:4,children:(0,t.jsx)(p,{ordersCount:e.ordersCount})}),(0,t.jsx)(s.ZP,{xs:12,sm:10,md:6,lg:4,children:r?(0,t.jsx)(g,{setEditing:l}):(0,t.jsx)(v,{status:e.currentStatus,setEditing:l})})]})})]})}},1713:function(e,n,r){"use strict";r.r(n);var t=r(5893),i=r(9008),a=r.n(i);n.default=function(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a(),{children:[(0,t.jsx)("title",{children:"AlMargen | Del otro lado de tu mesa"}),(0,t.jsx)("meta",{content:"width=device-width, initial-scale=1.0",name:"viewport"})]}),(0,t.jsx)("div",{children:n})]})}}},function(e){e.O(0,[258,187,597,774,888,179],(function(){return n=577,e(e.s=n);var n}));var n=e.O();_N_E=n}]);