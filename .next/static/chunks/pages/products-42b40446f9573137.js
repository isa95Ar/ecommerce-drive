(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{7153:function(t,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/products",function(){return r(3809)}])},5634:function(t,n,r){"use strict";var e=r(5893),c=r(6979);r(7294);n.Z=function(t){var n=t.addProduct,r=t.deleteProduct,o=t.qty;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c.Z,{className:"quantity-border",onClick:r,children:"-"}),(0,e.jsx)(c.Z,{className:"quantity",children:o}),(0,e.jsx)(c.Z,{className:"quantity-border",onClick:n,children:"+"})]})}},724:function(t,n,r){"use strict";r.d(n,{CP:function(){return s},Xp:function(){return i},g4:function(){return l}});var e=r(4051),c=r.n(e),o=r(8721);function a(t,n,r,e,c,o,a){try{var u=t[o](a),i=u.value}catch(s){return void r(s)}u.done?n(i):Promise.resolve(i).then(e,c)}function u(t){return function(){var n=this,r=arguments;return new Promise((function(e,c){var o=t.apply(n,r);function u(t){a(o,e,c,u,i,"next",t)}function i(t){a(o,e,c,u,i,"throw",t)}u(void 0)}))}}var i=function(){var t=u(c().mark((function t(){var n,r,e=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:1,r=e.length>1&&void 0!==e[1]?e[1]:null,t.next=3,(0,o.U)({url:"/api/products".concat(r?"/".concat(r):""),query:{page:n}});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),s=function(){var t=u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.U)({url:"/api/categories"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=(function(){var t=u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.U)({url:"/api/cart/status"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))}(),function(){var t=u(c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,o.U)({url:"/api/admin/orders/to-post"});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}())},3809:function(t,n,r){"use strict";r.r(n),r.d(n,{__N_SSP:function(){return E},default:function(){return q}});var e=r(5893),c=r(3165),o=r(4040),a=r(7501),u=r(2553),i=r(6353),s=r(7294),l=r(8773),d=r(5328),f=r(6979),p=r(7690),m=r(2814),h=r(9398),x=r(961),g=r(5678),j=r(428),y=r(5634),v=function(t){var n=t.item,r=t.addProduct,c=(0,x.j)(),a=(0,s.useState)(1),i=a[0],v=a[1];return(0,s.useEffect)((function(){var t=c.getCartProductQty(n.code);v(t)}),[c.data]),(0,e.jsx)(u.ZP,{xs:12,sm:12,md:12,lg:12,xl:12,children:(0,e.jsx)(l.ZP,{css:{margin:0,letterSpacing:0},children:(0,e.jsxs)(l.ZP.Body,{className:"product-container",children:[(0,e.jsxs)(u.ZP.Container,{gap:1,justify:"space-around",children:[(0,e.jsx)(u.ZP,{xs:4,children:(0,e.jsx)(d.ZP,{objectFit:"contain",src:n.picture})}),(0,e.jsxs)(u.ZP,{xs:8,className:"details-container",lg:6,md:6,xl:6,children:[(0,e.jsx)(f.Z,{className:"product-name",children:n.name}),(0,e.jsx)(f.Z,{className:"product-reference",children:n.minimum}),(0,e.jsxs)(f.Z,{className:"product-supplier",children:[(0,e.jsx)(m.G,{icon:h.Flz}),n.seller]}),(0,e.jsxs)(f.Z,{className:"product-price",children:["$",n.price]})]})]}),(0,e.jsxs)(o.Z,{children:[(0,e.jsx)(u.ZP,{sm:7,xs:7,lg:6,md:6,xl:6,className:"product-quantity",justify:"center",children:(0,e.jsx)(y.Z,{qty:i,addProduct:function(){v((function(t){return t+1}))},deleteProduct:function(){i>1&&v((function(t){return t-1}))}})}),(0,e.jsx)(u.ZP,{sm:3,xs:3,lg:6,md:6,xl:6,children:(0,e.jsx)(p.ZP,{onClick:function(){r(n,i),g.Am.warn("Agregado exitosamente",{autoClose:1500,icon:(0,e.jsx)(j.w,{fill:"#EA903C",size:24,width:16,height:16})})},className:"button-text",css:{backgroundColor:"#F29400",color:"black",fontWeight:400},auto:!0,flat:!0,children:"Agregar"})})]})]})})})},P=r(724),b=r(3883),Z=r(2536),w=function(t){var n=t.categories,r=t.category,c=t.setCategory;return(0,e.jsx)("div",{className:"selector-container",children:n.length>1&&(0,e.jsxs)(Z.ZP,{triggerType:"listbox",disableTriggerPressedAnimation:!0,children:[(0,e.jsx)(Z.ZP.Button,{className:"selector",children:r.name}),(0,e.jsx)(Z.ZP.Menu,{"aria-label":"Dynamic Actions",items:n,css:{width:1500},selectedKeys:r.key,onAction:function(t){c(n.find((function(n){return n.key===t})))},children:n.map((function(t){return(0,e.jsx)(Z.ZP.Item,{color:"delete"===t.key?"error":"default",children:t.name},t.key)}))})]})})},k=r(8662),N=r(8366),C=r(189),S=r(1163),_=function(t){var n=t.cart,r=(0,S.useRouter)();return(0,e.jsx)("div",{className:"container-floating",children:(0,e.jsx)(p.ZP,{onClick:function(){return r.push("cart")},size:"xs",className:"button-floating",children:(0,e.jsxs)("div",{className:"button-content",children:[(0,e.jsxs)("div",{className:"cart-total",children:["$ ",n.total]}),(0,e.jsx)(C.ZP,{color:"warning",size:"sm",content:n.products.length,shape:"circle",onClick:function(){return r.push("/cart")},children:(0,e.jsx)(j.w,{fill:"white",size:24,width:24,height:24,onClick:function(){return r.push("/cart")}})})]})})})};function A(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}function O(t){return function(t){if(Array.isArray(t))return A(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"===typeof t)return A(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=!0;function q(t){var n=(0,x.j)(t.cart),r=(0,s.useState)([]),l=r[0],d=r[1],f=(0,s.useState)([{key:"",name:"Todos"}]),p=f[0],m=f[1],h=(0,s.useState)({key:"",name:"Todos"}),g=h[0],j=h[1],y=(0,s.useState)(1),Z=y[0],C=y[1],S=(0,s.useState)(1),A=S[0],E=S[1],q=(0,s.useState)(!0),T=q[0],I=q[1];(0,s.useEffect)((function(){(0,k.o)(),(0,P.Xp)().then((function(t){d(t.products),C(t.totalPages),I(!1)})),(0,P.CP)().then((function(t){var n=[];t.map((function(t){return n.push({key:t.slug,name:t.name})})),m([{key:"",name:"Todos"}].concat(O(n)))}))}),[]);var F=function(t,n){(0,P.Xp)(t,n.key).then((function(n){E(t),C(n.totalPages),d(n.products)}))};return(0,s.useEffect)((function(){E(1),F(1,g)}),[g]),(0,e.jsxs)(N.default,{children:[(0,e.jsx)(b.Z,{title:"Eleg\xed el rubro y encontr\xe1 tus productos",user:t.user,cart:n}),(0,e.jsxs)(c.Z,{css:{backgroundColor:"#fff",maxWidth:"1260px"},children:[(0,e.jsx)(o.Z,{css:{backgroundColor:"#fff"},children:(0,e.jsx)(w,{categories:p,setCategory:function(t){return j(t)},category:g})}),T?(0,e.jsx)(a.ZP,{className:"loading-text-container",color:"warning",children:"Cargando..."}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(u.ZP.Container,{gap:1,css:{padding:0,backgroundColor:"#fff"},children:l.map((function(t){return(0,e.jsx)(u.ZP,{xs:12,sm:12,md:6,lg:4,xl:4,children:(0,e.jsx)(v,{addProduct:function(t,r){return function(t,r){n.addProduct(t,r)}(t,r)},item:t},t.code)},t.code)}))}),(0,e.jsx)(u.ZP.Container,{gap:2,css:{padding:0},children:(0,e.jsx)(u.ZP,{justify:"center",md:12,lg:12,xl:12,xs:12,sm:12,children:(0,e.jsx)(i.ZP,{className:"paginator",initialPage:1,total:Z,onChange:function(t){return F(t,g)},color:"warning",page:A})})})]})]}),n.products.length&&(0,e.jsx)(_,{cart:n})]})}},961:function(t,n,r){"use strict";r.d(n,{j:function(){return o}});var e=r(7294);function c(t,n,r){return n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t}function o(t){var n=(0,e.useState)({products:[],total:0}),r=n[0],o=n[1],a=function(t){var n=0;return t.map((function(t){return n=Number((n+t.total).toFixed(2))})),n},u=function(t,n){var e={code:t.code,name:t.name,qty:n,price:t.price,minimum:t.minimum,total:t.price*n,picture:t.picture},c=r.products;c.find((function(t){return t.code==e.code}))?c=c.map((function(t){return t.code==e.code?e:t})):c.push(e),i(c)},i=function(t){o({total:a(t),products:t}),localStorage.setItem("cart",JSON.stringify({total:a(t),products:t}))};return(0,e.useEffect)((function(){var n=localStorage.getItem("cart"),r=[];if(n){var e=JSON.parse(n);r=r.concat(e.products)}t&&t.products&&(r=r.concat(t.products)),r.map((function(t){return u(t,t.qty)}))}),[]),function(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},e=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),e.forEach((function(n){c(t,n,r[n])}))}return t}({},r,{data:r,addProduct:u,removeProduct:function(t){var n=r.products.filter((function(n){return n.code!==t.code}));i(n)},removeCart:function(){o({products:[],total:0}),localStorage.removeItem("cart")},updateProducts:i,getCartProductQty:function(t){var n=r.products.find((function(n){return n.code===t}));return n?n.qty:1}})}}},function(t){t.O(0,[523,139,710,74,583,849,774,888,179],(function(){return n=7153,t(t.s=n);var n}));var n=t.O();_N_E=n}]);