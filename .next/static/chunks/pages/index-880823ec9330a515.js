(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(4284)}])},5141:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(5893),c=(n(7294),n(7690)),s=n(189),i=n(6979),o=n(1163);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}function u(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}var d=function(e){var t=e.fill,n=void 0===t?"currentColor":t,c=e.size,s=e.height,i=e.width,o=u(e,["fill","size","height","width"]);return(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsxs)("svg",l({width:c||i||24,height:c||s||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o,{children:[(0,r.jsx)("path",{d:"M16.25 22.5C17.2165 22.5 18 21.7165 18 20.75C18 19.7835 17.2165 19 16.25 19C15.2835 19 14.5 19.7835 14.5 20.75C14.5 21.7165 15.2835 22.5 16.25 22.5Z",fill:n}),(0,r.jsx)("path",{d:"M8.25 22.5C9.2165 22.5 10 21.7165 10 20.75C10 19.7835 9.2165 19 8.25 19C7.2835 19 6.5 19.7835 6.5 20.75C6.5 21.7165 7.2835 22.5 8.25 22.5Z",fill:n}),(0,r.jsx)("path",{d:"M4.84 3.94L4.64 6.39C4.6 6.86 4.97 7.25 5.44 7.25H20.75C21.17 7.25 21.52 6.93 21.55 6.51C21.68 4.74 20.33 3.3 18.56 3.3H6.27C6.17 2.86 5.97 2.44 5.66 2.09C5.16 1.56 4.46 1.25 3.74 1.25H2C1.59 1.25 1.25 1.59 1.25 2C1.25 2.41 1.59 2.75 2 2.75H3.74C4.05 2.75 4.34 2.88 4.55 3.1C4.76 3.33 4.86 3.63 4.84 3.94Z",fill:n}),(0,r.jsx)("path",{d:"M20.5101 8.75H5.17005C4.75005 8.75 4.41005 9.07 4.37005 9.48L4.01005 13.83C3.87005 15.54 5.21005 17 6.92005 17H18.0401C19.5401 17 20.8601 15.77 20.9701 14.27L21.3001 9.6C21.3401 9.14 20.9801 8.75 20.5101 8.75Z",fill:n})]}))})},f=function(e){var t=e.title,n=e.user,a=e.cart,l=(0,o.useRouter)();return(0,r.jsxs)("div",{className:"header",children:[n.logged&&(0,r.jsxs)("div",{className:"logout-button",children:[(0,r.jsxs)(c.ZP,{className:"logout-button",onClick:function(){return l.push("/api/logout")},children:["Cerrar Session (",n.name,")"]}),a&&(0,r.jsx)(s.ZP,{css:{cursor:"pointer"},color:"warning",content:a.products.length,shape:"circle",children:(0,r.jsx)(d,{fill:"white",size:30,width:24,height:24,onClick:function(){return l.push("/cart")}})})]}),(0,r.jsx)(i.Z,{className:"header-text",children:t})]})}},4284:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return F},default:function(){return M}});var r=n(5893),c=n(1713),s=n(2553),i=n(5328),o=n(7690);function a(){return(0,r.jsx)(s.ZP,{className:"login",children:(0,r.jsxs)(s.ZP.Container,{justify:"center",alignContent:"center",children:[(0,r.jsx)(s.ZP,{xs:12,xl:12,children:(0,r.jsx)(i.ZP,{src:"/img/logoCoop.png",alt:"Default Image"})}),(0,r.jsx)(s.ZP,{xs:12,xl:3,sm:6,md:3,lg:3,children:(0,r.jsx)(o.ZP,{className:"google-button",onClick:function(){return location.href="/api/login"},children:"  Ingres\xe1 con Google"})})]})})}var l=n(3165),u=n(4040),d=n(7501),f=n(6353),h=n(7294),m=n(8773),g=n(9372),x=n(6979),p=n(5520),j=n(2814),y=n(9398);function v(e){var t=e.item,n=e.addProduct,c=(0,h.useState)(1),i=c[0],a=c[1];return(0,r.jsx)(s.ZP,{xs:12,sm:12,md:12,lg:12,xl:12,children:(0,r.jsx)(m.ZP,{css:{margin:0},children:(0,r.jsxs)(m.ZP.Body,{className:"product-container",children:[(0,r.jsxs)(u.Z,{className:"text-container",children:[(0,r.jsx)(s.ZP,{sm:7,xs:7,lg:6,md:6,xl:6,justify:"center",children:(0,r.jsx)(g.ZP,{css:{width:100,height:100},className:"product-image",src:"https://s3-alpha-sig.figma.com/img/1a50/6114/accaeeb408d6dfb78fad323b25d00302?Expires=1662940800&Signature=Z8l8tNl7-LjlkbXM79cDGZGhKjLUw49mS3yn~iuOANWb-CewZF6E0Eo3U3lqLtRsk2V4I5y74~pXTiw-P88HPP2cUf3BUCfm3LGUnk0TsZ9kQflS0BaP2lldIA174tZpUo82eHnIPZENYjeT7dcXj7siOGMAEYS26JVT7WbrHZZcmteXs01Fpy4xU-NYQjnxEIsUEd0BZftl-yiAZgjWNU8uJU71eIiJqc5HhsxBj0izH-AKkI5OIi7454TRm-CsOgB93WgACpWxCATgU2m0lR5G1qYkGJfr5kA97De-Wgm6khozCXc1BlfSbFIJxvgFsHGoCRVAwHzEMIMDrnf6IA__&Key-Pair-Id=APKAINTVSUGEWH5XD5UA"})}),(0,r.jsxs)(s.ZP,{className:"details-container",lg:6,md:6,xl:6,children:[(0,r.jsx)(x.Z,{className:"product-name",children:t.name}),(0,r.jsx)(x.Z,{className:"product-reference",children:t.minimum}),(0,r.jsxs)(x.Z,{className:"product-supplier",children:[(0,r.jsx)(j.G,{icon:y.Flz}),t.seller]}),(0,r.jsxs)(x.Z,{className:"product-price",children:["$",t.price]})]})]}),(0,r.jsxs)(u.Z,{children:[(0,r.jsxs)(s.ZP,{sm:7,xs:7,lg:6,md:6,xl:6,className:"product-quantity",justify:"center",children:[(0,r.jsx)(x.Z,{className:"quantity-border",onClick:function(){i>1&&a((function(e){return e-1}))},children:"-"}),(0,r.jsx)(x.Z,{className:"quantity",children:i}),(0,r.jsx)(x.Z,{className:"quantity-border",onClick:function(){a((function(e){return e+1}))},children:"+"})]}),(0,r.jsx)(s.ZP,{sm:3,xs:3,lg:6,md:6,xl:6,children:(0,r.jsxs)(p.Z,{children:[(0,r.jsx)(p.Z.Trigger,{children:(0,r.jsx)(o.ZP,{onClick:function(){return n(t,i)},className:"button-text",color:"warning",auto:!0,flat:!0,children:"Agregar"})}),(0,r.jsx)(p.Z.Content,{children:(0,r.jsx)(x.Z,{css:{p:"$10"},children:"Agregado exitosamente!"})})]})})]})]})})})}var b=n(4051),Z=n.n(b);function P(e,t,n,r,c,s,i){try{var o=e[s](i),a=o.value}catch(l){return void n(l)}o.done?t(a):Promise.resolve(a).then(r,c)}function w(e){return function(){var t=this,n=arguments;return new Promise((function(r,c){var s=e.apply(t,n);function i(e){P(s,r,c,i,o,"next",e)}function o(e){P(s,r,c,i,o,"throw",e)}i(void 0)}))}}var C=function(){var e=w(Z().mark((function e(){var t,n,r,c,s=arguments;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,n=s.length>1&&void 0!==s[1]?s[1]:null,r="/api/products",n&&(r+="/"+n),e.next=5,fetch("".concat(r,"?page=").concat(t)).then((function(e){return e.json()}));case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=w(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/categories").then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=(function(){var e=w(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/cart/status").then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))}(),n(5141)),N=n(3002),O=function(e){var t=e.categories,n=e.category,c=e.setCategory;return(0,r.jsx)("div",{className:"selector-container",children:t.length>1&&(0,r.jsxs)(N.ZP,{triggerType:"listbox",children:[(0,r.jsx)(N.ZP.Button,{className:"selector",children:n.name}),(0,r.jsx)(N.ZP.Menu,{"aria-label":"Dynamic Actions",items:t,selectedKeys:n.key,onAction:function(e){c(t.find((function(t){return t.key===e})))},children:t.map((function(e){return(0,r.jsx)(N.ZP.Item,{color:"delete"===e.key?"error":"default",children:e.name},e.key)}))})]})})},A=n(961);function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){var t=(0,A.j)(),n=(0,h.useState)([]),c=n[0],i=n[1],o=(0,h.useState)([{key:"",name:"Todos"}]),a=o[0],m=o[1],g=(0,h.useState)({key:"",name:"Todos"}),x=g[0],p=g[1],j=(0,h.useState)(1),y=j[0],b=j[1],Z=(0,h.useState)(1),P=Z[0],w=Z[1],N=(0,h.useState)(!0),E=N[0],_=N[1];(0,h.useEffect)((function(){C().then((function(e){i(e.products),b(e.totalPages),_(!1)})),k().then((function(e){var t=[];e.map((function(e){return t.push({key:e.slug,name:e.name})})),m([{key:"",name:"Todos"}].concat(I(t)))}))}),[]);var T=function(e,t){C(e,t.key).then((function(t){w(e),b(t.totalPages),i(t.products)}))};return(0,h.useEffect)((function(){w(1),T(1,x)}),[x]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(S.Z,{title:"Eleg\xed el rubro y encontr\xe1 tus productos",user:e.user,cart:t.Cart}),(0,r.jsxs)(l.Z,{css:{backgroundColor:"#fff"},children:[(0,r.jsx)(u.Z,{css:{backgroundColor:"#fff"},children:(0,r.jsx)(O,{categories:a,setCategory:function(e){return p(e)},category:x})}),E?(0,r.jsx)(d.ZP,{css:{margin:"auto",width:"100%",paddingTop:"10vh"},color:"warning",children:"Cargando..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.ZP.Container,{gap:2,css:{padding:0,backgroundColor:"#fff"},children:c.map((function(e){return(0,r.jsx)(s.ZP,{xs:12,sm:12,md:6,lg:4,xl:4,children:(0,r.jsx)(v,{addProduct:function(e,n){return function(e,n){t.addProduct(e,n)}(e,n)},item:e},e.code)},e.code)}))}),(0,r.jsx)(s.ZP.Container,{gap:2,css:{padding:0},children:(0,r.jsx)(s.ZP,{justify:"center",md:12,lg:12,xl:12,xs:12,sm:12,children:(0,r.jsx)(f.ZP,{initialPage:1,total:y,onChange:function(e){return T(e,x)},color:"warning",page:P})})})]})]})]})}var T=n(7087);function U(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,r.jsx)(j.G,{icon:y.eFW,color:"white",style:{alignSelf:"center"}}),(0,r.jsxs)(T.ZP,{block:!0,href:"#",className:"link-container",underline:!0,children:[" ","Visit\xe1 Nuestra p\xe1gina"]})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,r.jsx)(j.G,{icon:y.eFW,color:"white",style:{alignSelf:"center"}}),(0,r.jsxs)(T.ZP,{block:!0,href:"#",className:"link-container",underline:!0,children:[" ","Unite a la comunidad"]})]})]})}var H="/_next/static/media/BgImgAviso.a3213864.jpg";function D(e){var t,n=e.status,c=n.openDate,s="white",i={imgStyle:{backgroundImage:"url(".concat(H,")"),height:"100vh",backgroundRepeat:"no-repeat",backgroundSize:"cover"},linkStyle:{color:"white"},avisoStyle:{color:"white"}};"url(".concat(H,")");return t=i,(0,r.jsx)("div",{style:t.imgStyle,children:(0,r.jsxs)(l.Z,{fluid:!0,children:[(0,r.jsx)(m.ZP,{css:{height:"40vh",background:"none"},children:" "}),"open"===n.status?(0,r.jsx)("div",{children:(0,r.jsxs)(x.Z,{h1:!0,css:{color:s},children:["\xbfYa hiciste tu pedido de este mes?"," "]})}):"toOpen"===n.status?(0,r.jsx)("div",{children:(0,r.jsxs)(x.Z,{h1:!0,css:{color:s},children:["El carrito abre el"," ",c]})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)(x.Z,{h1:!0,css:{color:s},children:["El carrito ya est\xe1 cerrado."," "]}),(0,r.jsxs)(x.Z,{h4:!0,css:{color:s},children:["Nos vemos la pr\xf3xima semana."," "]})]}),(0,r.jsx)(U,{})]})})}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F=!0;function M(e){return(0,r.jsx)(c.default,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){G(e,t,n[t])}))}return e}({},e,{children:e.user.logged||"open"!==e.cartStatus.status?e.user.logged&&"open"===e.cartStatus.status?(0,r.jsx)(_,{user:e.user}):(0,r.jsx)(D,{status:e.cartStatus}):(0,r.jsx)(a,{})}))}},1713:function(e,t,n){"use strict";n.r(t);var r=n(5893),c=n(9008),s=n.n(c);t.default=function(e){var t=e.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"AlMargen | Del otro lado de tu mesa"}),(0,r.jsx)("meta",{content:"width=device-width, initial-scale=1.0",name:"viewport"})]}),(0,r.jsx)("div",{children:t})]})}},961:function(e,t,n){"use strict";n.d(t,{j:function(){return c}});var r=n(7294);function c(){var e=(0,r.useState)({products:[],total:0}),t=e[0],n=e[1],c=function(e){var t=0;return e.map((function(e){return t+=e.total})),t},s=function(e){n({total:c(e),products:e}),localStorage.setItem("cart",JSON.stringify({total:c(e),products:e}))};return(0,r.useEffect)((function(){var e=localStorage.getItem("cart");e&&n(JSON.parse(e))}),[]),{Cart:t,addProduct:function(e,n){var r={code:e.code,name:e.name,qty:n,price:e.price,minimum:e.minimum,total:e.price*n},c=t.products;c.find((function(e){return e.code==r.code}))?c=c.map((function(e){return e.code==r.code?r:e})):c.push(r),s(c)},removeProduct:function(e){var n=t.products.filter((function(t){return t.code!==e.code}));s(n)},removeCart:function(){n({products:[],total:0}),localStorage.removeItem("cart")}}}}},function(e){e.O(0,[523,258,814,187,529,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);