(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(135)}])},5141:function(t,e,n){"use strict";n.d(e,{Z:function(){return d}});var r=n(5893),c=(n(7294),n(7690)),o=n(189),i=n(6979),s=n(1163);function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){u(t,e,n[e])}))}return t}function l(t,e){if(null==t)return{};var n,r,c=function(t,e){if(null==t)return{};var n,r,c={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(c[n]=t[n]);return c}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(c[n]=t[n])}return c}var f=function(t){var e=t.fill,n=void 0===e?"currentColor":e,c=t.size,o=t.height,i=t.width,s=l(t,["fill","size","height","width"]);return(0,r.jsx)("div",{style:{cursor:"pointer"},children:(0,r.jsxs)("svg",a({width:c||i||24,height:c||o||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{children:[(0,r.jsx)("path",{d:"M16.25 22.5C17.2165 22.5 18 21.7165 18 20.75C18 19.7835 17.2165 19 16.25 19C15.2835 19 14.5 19.7835 14.5 20.75C14.5 21.7165 15.2835 22.5 16.25 22.5Z",fill:n}),(0,r.jsx)("path",{d:"M8.25 22.5C9.2165 22.5 10 21.7165 10 20.75C10 19.7835 9.2165 19 8.25 19C7.2835 19 6.5 19.7835 6.5 20.75C6.5 21.7165 7.2835 22.5 8.25 22.5Z",fill:n}),(0,r.jsx)("path",{d:"M4.84 3.94L4.64 6.39C4.6 6.86 4.97 7.25 5.44 7.25H20.75C21.17 7.25 21.52 6.93 21.55 6.51C21.68 4.74 20.33 3.3 18.56 3.3H6.27C6.17 2.86 5.97 2.44 5.66 2.09C5.16 1.56 4.46 1.25 3.74 1.25H2C1.59 1.25 1.25 1.59 1.25 2C1.25 2.41 1.59 2.75 2 2.75H3.74C4.05 2.75 4.34 2.88 4.55 3.1C4.76 3.33 4.86 3.63 4.84 3.94Z",fill:n}),(0,r.jsx)("path",{d:"M20.5101 8.75H5.17005C4.75005 8.75 4.41005 9.07 4.37005 9.48L4.01005 13.83C3.87005 15.54 5.21005 17 6.92005 17H18.0401C19.5401 17 20.8601 15.77 20.9701 14.27L21.3001 9.6C21.3401 9.14 20.9801 8.75 20.5101 8.75Z",fill:n})]}))})},d=function(t){var e=t.title,n=t.user,u=t.cart,a=(0,s.useRouter)();return(0,r.jsxs)("div",{className:"header",children:[n.logged&&(0,r.jsxs)("div",{className:"logout-button",children:[(0,r.jsxs)(c.ZP,{className:"logout-button",onClick:function(){return a.push("/api/logout")},children:["Cerrar Session (",n.name,")"]}),u&&(0,r.jsx)(o.ZP,{css:{cursor:"pointer"},color:"warning",content:u.products.length,shape:"circle",children:(0,r.jsx)(f,{fill:"white",size:30,width:24,height:24,onClick:function(){return a.push("/cart")}})})]}),(0,r.jsx)(i.Z,{className:"header-text",children:e})]})}},8754:function(t,e,n){"use strict";n.d(e,{CP:function(){return j},g4:function(){return y},Xp:function(){return m}});var r=n(4051),c=n.n(r);function o(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e,n){return(s=i()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var c=new(Function.bind.apply(t,r));return n&&l(c,n.prototype),c}).apply(null,arguments)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return!e||"object"!==f(e)&&"function"!==typeof e?o(t):e}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){return t&&"undefined"!==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};function d(t){var e="function"===typeof Map?new Map:void 0;return d=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return s(t,arguments,u(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,t)},d(t)}function h(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=u(t);if(e){var c=u(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return a(this,n)}}var p=function(t){!function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(n,t);var e=h(n);function n(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),r=e.call(this,t),Object.setPrototypeOf(o(r),n.prototype),r}return n.prototype.jsonOutPut=function(){return{error:!0,message:this.message}},n}(d(Error));function x(t,e,n,r,c,o,i){try{var s=t[o](i),u=s.value}catch(a){return void n(a)}s.done?e(u):Promise.resolve(u).then(r,c)}function g(t){return function(){var e=this,n=arguments;return new Promise((function(r,c){var o=t.apply(e,n);function i(t){x(o,r,c,i,s,"next",t)}function s(t){x(o,r,c,i,s,"throw",t)}i(void 0)}))}}var m=function(){var t=g(c().mark((function t(){var e,n,r,o,i=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:1,n=i.length>1&&void 0!==i[1]?i[1]:null,r="/api/products",n&&(r+="/"+n),t.next=5,fetch("".concat(r,"?page=").concat(e)).then((function(t){return t.json()}));case 5:return o=t.sent,t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(){var t=g(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/categories").then((function(t){return t.json()}));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=(function(){var t=g(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/cart/status").then((function(t){return t.json()}));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))}(),function(){var t=g(c().mark((function t(){var e;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/admin/orders/to-post").then((function(t){return t.json()}));case 3:return e=t.sent,t.abrupt("return",e);case 7:throw t.prev=7,t.t0=t.catch(0),new p(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}())},135:function(t,e,n){"use strict";n.r(e),n.d(e,{__N_SSP:function(){return M},default:function(){return R}});var r=n(5893),c=n(1713),o=n(2553),i=n(5328),s=n(7690),u=n(6979),a=n(7294),l=function(t){var e=t.height,n=void 0===e?48:e,c=t.width,o=void 0===c?48:c;return(0,r.jsx)("div",{style:{cursor:"pointer",display:"flex",alignSelf:"center",justifyItems:"center",alignContent:"center"},children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"".concat(o,"px"),height:"".concat(n,"px"),children:[(0,r.jsx)("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,r.jsx)("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,r.jsx)("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,r.jsx)("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})})};function f(){return(0,r.jsx)(o.ZP,{className:"login",children:(0,r.jsxs)(o.ZP.Container,{justify:"center",alignContent:"center",children:[(0,r.jsx)(o.ZP,{xs:12,xl:12,css:{zIndex:9e3},children:(0,r.jsx)(i.ZP,{src:"/img/logoCoop.png",alt:"Default Image"})}),(0,r.jsx)(o.ZP,{xs:12,xl:3,sm:6,md:3,lg:3,children:(0,r.jsx)(s.ZP,{className:"google-button",onClick:function(){return location.href="/api/login"},children:(0,r.jsxs)("div",{className:"button-container",children:[(0,r.jsx)(l,{width:30,height:30}),(0,r.jsx)(u.Z,{style:{marginLeft:5},children:"Ingres\xe1 con Google"})]})})})]})})}var d=n(3165),h=n(4040),p=n(7501),x=n(6353),g=n(8773),m=n(9372),j=n(5520),y=n(2814),v=n(9398);function b(t){var e=t.item,n=t.addProduct,c=(0,a.useState)(1),i=c[0],l=c[1];return(0,r.jsx)(o.ZP,{xs:12,sm:12,md:12,lg:12,xl:12,children:(0,r.jsx)(g.ZP,{css:{margin:0},children:(0,r.jsxs)(g.ZP.Body,{className:"product-container",children:[(0,r.jsxs)(h.Z,{className:"text-container",children:[(0,r.jsx)(o.ZP,{sm:7,xs:7,lg:6,md:6,xl:6,justify:"center",children:(0,r.jsx)(m.ZP,{css:{width:100,height:100},className:"product-image",src:e.picture})}),(0,r.jsxs)(o.ZP,{className:"details-container",lg:6,md:6,xl:6,children:[(0,r.jsx)(u.Z,{className:"product-name",children:e.name}),(0,r.jsx)(u.Z,{className:"product-reference",children:e.minimum}),(0,r.jsxs)(u.Z,{className:"product-supplier",children:[(0,r.jsx)(y.G,{icon:v.Flz}),e.seller]}),(0,r.jsxs)(u.Z,{className:"product-price",children:["$",e.price]})]})]}),(0,r.jsxs)(h.Z,{children:[(0,r.jsxs)(o.ZP,{sm:7,xs:7,lg:6,md:6,xl:6,className:"product-quantity",justify:"center",children:[(0,r.jsx)(u.Z,{className:"quantity-border",onClick:function(){i>1&&l((function(t){return t-1}))},children:"-"}),(0,r.jsx)(u.Z,{className:"quantity",children:i}),(0,r.jsx)(u.Z,{className:"quantity-border",onClick:function(){l((function(t){return t+1}))},children:"+"})]}),(0,r.jsx)(o.ZP,{sm:3,xs:3,lg:6,md:6,xl:6,children:(0,r.jsxs)(j.Z,{children:[(0,r.jsx)(j.Z.Trigger,{children:(0,r.jsx)(s.ZP,{onClick:function(){return n(e,i)},className:"button-text",color:"warning",auto:!0,flat:!0,children:"Agregar"})}),(0,r.jsx)(j.Z.Content,{children:(0,r.jsx)(u.Z,{css:{p:"$10"},children:"Agregado exitosamente!"})})]})})]})]})})})}var w=n(8754),C=n(5141),P=n(3002),Z=function(t){var e=t.categories,n=t.category,c=t.setCategory;return(0,r.jsx)("div",{className:"selector-container",children:e.length>1&&(0,r.jsxs)(P.ZP,{triggerType:"listbox",children:[(0,r.jsx)(P.ZP.Button,{className:"selector",children:n.name}),(0,r.jsx)(P.ZP.Menu,{"aria-label":"Dynamic Actions",items:e,selectedKeys:n.key,onAction:function(t){c(e.find((function(e){return e.key===t})))},children:e.map((function(t){return(0,r.jsx)(P.ZP.Item,{color:"delete"===t.key?"error":"default",children:t.name},t.key)}))})]})})},O=n(961);function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"===typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t){var e=(0,O.j)(),n=(0,a.useState)([]),c=n[0],i=n[1],s=(0,a.useState)([{key:"",name:"Todos"}]),u=s[0],l=s[1],f=(0,a.useState)({key:"",name:"Todos"}),g=f[0],m=f[1],j=(0,a.useState)(1),y=j[0],v=j[1],P=(0,a.useState)(1),S=P[0],N=P[1],_=(0,a.useState)(!0),E=_[0],A=_[1];(0,a.useEffect)((function(){(0,w.Xp)().then((function(t){i(t.products),v(t.totalPages),A(!1)})),(0,w.CP)().then((function(t){var e=[];t.map((function(t){return e.push({key:t.slug,name:t.name})})),l([{key:"",name:"Todos"}].concat(k(e)))}))}),[]);var F=function(t,e){(0,w.Xp)(t,e.key).then((function(e){N(t),v(e.totalPages),i(e.products)}))};return(0,a.useEffect)((function(){N(1),F(1,g)}),[g]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.Z,{title:"Eleg\xed el rubro y encontr\xe1 tus productos",user:t.user,cart:e.Cart}),(0,r.jsxs)(d.Z,{css:{backgroundColor:"#fff"},children:[(0,r.jsx)(h.Z,{css:{backgroundColor:"#fff"},children:(0,r.jsx)(Z,{categories:u,setCategory:function(t){return m(t)},category:g})}),E?(0,r.jsx)(p.ZP,{css:{margin:"auto",width:"100%",paddingTop:"10vh"},color:"warning",children:"Cargando..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.ZP.Container,{gap:2,css:{padding:0,backgroundColor:"#fff"},children:c.map((function(t){return(0,r.jsx)(o.ZP,{xs:12,sm:12,md:6,lg:4,xl:4,children:(0,r.jsx)(b,{addProduct:function(t,n){return function(t,n){e.addProduct(t,n)}(t,n)},item:t},t.code)},t.code)}))}),(0,r.jsx)(o.ZP.Container,{gap:2,css:{padding:0},children:(0,r.jsx)(o.ZP,{justify:"center",md:12,lg:12,xl:12,xs:12,sm:12,children:(0,r.jsx)(x.ZP,{initialPage:1,total:y,onChange:function(t){return F(t,g)},color:"warning",page:S})})})]})]})]})}var _=n(7087);function E(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,r.jsx)(y.G,{icon:v.eFW,color:"white",style:{alignSelf:"center"}}),(0,r.jsxs)(_.ZP,{block:!0,href:"#",className:"link-container",underline:!0,children:[" ","Visit\xe1 Nuestra p\xe1gina"]})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[(0,r.jsx)(y.G,{icon:v.eFW,color:"white",style:{alignSelf:"center"}}),(0,r.jsxs)(_.ZP,{block:!0,href:"#",className:"link-container",underline:!0,children:[" ","Unite a la comunidad"]})]})]})}var A="/_next/static/media/BgImgAviso.a3213864.jpg";function F(t){var e,n=t.status,c=n.openDate,o="white",i={imgStyle:{backgroundImage:"url(".concat(A,")"),height:"100vh",backgroundRepeat:"no-repeat",backgroundSize:"cover"},linkStyle:{color:"white"},avisoStyle:{color:"white"}};"url(".concat(A,")");return e=i,(0,r.jsx)("div",{style:e.imgStyle,children:(0,r.jsxs)(d.Z,{fluid:!0,children:[(0,r.jsx)(g.ZP,{css:{height:"40vh",background:"none"},children:" "}),"open"===n.status?(0,r.jsx)("div",{children:(0,r.jsxs)(u.Z,{h1:!0,css:{color:o},children:["\xbfYa hiciste tu pedido de este mes?"," "]})}):"toOpen"===n.status?(0,r.jsx)("div",{children:(0,r.jsxs)(u.Z,{h1:!0,css:{color:o},children:["El carrito abre el"," ",c]})}):(0,r.jsxs)("div",{children:[(0,r.jsxs)(u.Z,{h1:!0,css:{color:o},children:["El carrito ya est\xe1 cerrado."," "]}),(0,r.jsxs)(u.Z,{h4:!0,css:{color:o},children:["Nos vemos la pr\xf3xima semana."," "]})]}),(0,r.jsx)(E,{})]})})}function I(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var M=!0;function R(t){return(0,r.jsx)(c.default,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){I(t,e,n[e])}))}return t}({},t,{children:t.user.logged||"open"!==t.cartStatus.status?t.user.logged&&"open"===t.cartStatus.status?(0,r.jsx)(N,{user:t.user}):(0,r.jsx)(F,{status:t.cartStatus}):(0,r.jsx)(f,{})}))}},1713:function(t,e,n){"use strict";n.r(e);var r=n(5893),c=n(9008),o=n.n(c);e.default=function(t){var e=t.children;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o(),{children:[(0,r.jsx)("title",{children:"AlMargen | Del otro lado de tu mesa"}),(0,r.jsx)("meta",{content:"width=device-width, initial-scale=1.0",name:"viewport"})]}),(0,r.jsx)("div",{children:e})]})}},961:function(t,e,n){"use strict";n.d(e,{j:function(){return c}});var r=n(7294);function c(){var t=(0,r.useState)({products:[],total:0}),e=t[0],n=t[1],c=function(t){var e=0;return t.map((function(t){return e+=t.total})),e},o=function(t){n({total:c(t),products:t}),localStorage.setItem("cart",JSON.stringify({total:c(t),products:t}))};return(0,r.useEffect)((function(){var t=localStorage.getItem("cart");t&&n(JSON.parse(t))}),[]),{Cart:e,addProduct:function(t,n){var r={code:t.code,name:t.name,qty:n,price:t.price,minimum:t.minimum,total:t.price*n,picture:t.picture},c=e.products;c.find((function(t){return t.code==r.code}))?c=c.map((function(t){return t.code==r.code?r:t})):c.push(r),o(c)},removeProduct:function(t){var n=e.products.filter((function(e){return e.code!==t.code}));o(n)},removeCart:function(){n({products:[],total:0}),localStorage.removeItem("cart")}}}}},function(t){t.O(0,[523,258,814,187,529,774,888,179],(function(){return e=8312,t(t.s=e);var e}));var e=t.O();_N_E=e}]);