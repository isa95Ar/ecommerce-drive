(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return r(726)}])},5141:function(e,n,r){"use strict";r.d(n,{Z:function(){return p}});var t=r(5893),o=(r(7294),r(7690)),i=r(189),s=r(6979),c=r(1163);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function u(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){a(e,n,r[n])}))}return e}function l(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var d=function(e){var n=e.fill,r=void 0===n?"currentColor":n,o=e.size,i=e.height,s=e.width,c=l(e,["fill","size","height","width"]);return(0,t.jsx)("div",{style:{cursor:"pointer"},children:(0,t.jsxs)("svg",u({width:o||s||24,height:o||i||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c,{children:[(0,t.jsx)("path",{d:"M16.25 22.5C17.2165 22.5 18 21.7165 18 20.75C18 19.7835 17.2165 19 16.25 19C15.2835 19 14.5 19.7835 14.5 20.75C14.5 21.7165 15.2835 22.5 16.25 22.5Z",fill:r}),(0,t.jsx)("path",{d:"M8.25 22.5C9.2165 22.5 10 21.7165 10 20.75C10 19.7835 9.2165 19 8.25 19C7.2835 19 6.5 19.7835 6.5 20.75C6.5 21.7165 7.2835 22.5 8.25 22.5Z",fill:r}),(0,t.jsx)("path",{d:"M4.84 3.94L4.64 6.39C4.6 6.86 4.97 7.25 5.44 7.25H20.75C21.17 7.25 21.52 6.93 21.55 6.51C21.68 4.74 20.33 3.3 18.56 3.3H6.27C6.17 2.86 5.97 2.44 5.66 2.09C5.16 1.56 4.46 1.25 3.74 1.25H2C1.59 1.25 1.25 1.59 1.25 2C1.25 2.41 1.59 2.75 2 2.75H3.74C4.05 2.75 4.34 2.88 4.55 3.1C4.76 3.33 4.86 3.63 4.84 3.94Z",fill:r}),(0,t.jsx)("path",{d:"M20.5101 8.75H5.17005C4.75005 8.75 4.41005 9.07 4.37005 9.48L4.01005 13.83C3.87005 15.54 5.21005 17 6.92005 17H18.0401C19.5401 17 20.8601 15.77 20.9701 14.27L21.3001 9.6C21.3401 9.14 20.9801 8.75 20.5101 8.75Z",fill:r})]}))})},f=r(2814),h=r(9398),p=function(e){var n=e.title,r=e.user,a=e.cart,u=(0,c.useRouter)();return(0,t.jsxs)("div",{className:"header",children:[r.logged&&(0,t.jsxs)("div",{className:"buttons-container",children:[(0,t.jsx)("div",{children:(0,t.jsx)(f.G,{onClick:function(){return u.push("/")},size:"lg",icon:h.wzO,style:{color:"white"}})}),(0,t.jsxs)("div",{className:"sessions-buttons",children:[(0,t.jsxs)(o.ZP,{className:"logout-button",onClick:function(){return u.push("/api/logout")},children:["Cerrar Session (",r.name,")"]}),a&&(0,t.jsx)(i.ZP,{css:{cursor:"pointer"},color:"warning",content:a.products.length,shape:"circle",children:(0,t.jsx)(d,{fill:"white",size:30,width:24,height:24,onClick:function(){return u.push("/cart")}})})]})]}),(0,t.jsx)(s.Z,{className:"header-text",children:n})]})}},8754:function(e,n,r){"use strict";r.d(n,{CP:function(){return g},g4:function(){return y},Xp:function(){return j}});var t=r(4051),o=r.n(t);function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function c(e,n,r){return(c=s()?Reflect.construct:function(e,n,r){var t=[null];t.push.apply(t,n);var o=new(Function.bind.apply(e,t));return r&&l(o,r.prototype),o}).apply(null,arguments)}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,n){return!n||"object"!==d(n)&&"function"!==typeof n?i(e):n}function l(e,n){return(l=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var d=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function f(e){var n="function"===typeof Map?new Map:void 0;return f=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return c(e,arguments,a(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),l(t,e)},f(e)}function h(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,t=a(e);if(n){var o=a(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return u(this,r)}}var p=function(e){!function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&l(e,n)}(r,e);var n=h(r);function r(e){var t;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,r),t=n.call(this,e),Object.setPrototypeOf(i(t),r.prototype),t}return r.prototype.jsonOutPut=function(){return{error:!0,message:this.message}},r}(f(Error));function x(e,n,r,t,o,i,s){try{var c=e[i](s),a=c.value}catch(u){return void r(u)}c.done?n(a):Promise.resolve(a).then(t,o)}function v(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function s(e){x(i,t,o,s,c,"next",e)}function c(e){x(i,t,o,s,c,"throw",e)}s(void 0)}))}}var j=function(){var e=v(o().mark((function e(){var n,r,t,i,s=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:1,r=s.length>1&&void 0!==s[1]?s[1]:null,t="/api/products",r&&(t+="/"+r),e.next=5,fetch("".concat(t,"?page=").concat(n)).then((function(e){return e.json()}));case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=v(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/categories").then((function(e){return e.json()}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=(function(){var e=v(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/cart/status").then((function(e){return e.json()}));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))}(),function(){var e=v(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/admin/orders/to-post").then((function(e){return e.json()}));case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),new p(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}())},726:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSP:function(){return b},default:function(){return w}});var t=r(5893),o=r(7294),i=r(3165),s=r(2553),c=r(8366),a=r(5141),u=r(4051),l=r.n(u),d=r(2049),f=r(6979),h=r(7690),p=r(7501);function x(e,n,r,t,o,i,s){try{var c=e[i](s),a=c.value}catch(u){return void r(u)}c.done?n(a):Promise.resolve(a).then(t,o)}var v=function(e){var n=e.setEditing,r=e.setCurrentStatus,c=function(e){return e.toISOString().split("T")[0]},a=(0,o.useState)(""),u=a[0],v=a[1],j=(0,o.useState)(""),g=j[0],y=j[1],m=(0,o.useState)(""),b=m[0],w=m[1],C=(0,o.useState)(""),P=C[0],Z=C[1],O=(0,o.useState)({error:null,loading:!1,done:!1}),S=O[0],k=O[1],_=c(new Date),E=function(){var e,t=(e=l().mark((function e(){var t,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k({error:null,done:!1,loading:!0}),e.next=4,fetch("/api/admin/cart/dates",{method:"POST",body:JSON.stringify({openDate:u,closeDate:g})});case 4:return t=e.sent,e.next=7,t.json();case 7:o=e.sent,r(o),k({error:null,loading:!1,done:!0}),n(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),k({error:"Ocurri\xf3 un error enviando las fechas",loading:!1,done:!0}),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function s(e){x(i,t,o,s,c,"next",e)}function c(e){x(i,t,o,s,c,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}();return(0,t.jsxs)(i.Z,{children:[(0,t.jsxs)(s.ZP.Container,{gap:3,justify:"center",children:[(0,t.jsxs)(s.ZP,{children:[(0,t.jsx)(d.ZP,{type:"date",label:"Nueva fecha de apertura",min:_,value:u,onChange:function(e){var n=e.target.value;w(""),Z(""),v(n);var r=new Date(n);n&&(r.setDate(r.getDate()+1),y(c(r)))}}),(0,t.jsx)(f.Z,{color:"error",children:b})]}),(0,t.jsxs)(s.ZP,{children:[(0,t.jsx)(d.ZP,{type:"date",label:"Nueva fecha de cierre",disabled:""===u,min:function(){if(!u)return"";var e=new Date(u);return e.setDate(e.getDate()+1),c(e)}(),value:g,onChange:function(e){Z(""),y(e.target.value)}}),(0,t.jsx)(f.Z,{color:"error",children:P})]})]}),(0,t.jsx)(h.ZP,{onClick:function(){return n(!1)},className:S.loading?"button-total-disabled":"button-cancel",children:"Cancelar"}),(0,t.jsx)(h.ZP,{onClick:function(){(function(){w(""),Z("");var e=!0;return u||(w("Debe ingresar una fecha de apertura"),e=!1),g||(Z("Debe ingresar una fecha de cierre"),e=!1),u&&g&&new Date(g)<=new Date(u)&&(Z("La fecha de cierre debe ser mayor que la de apertura"),e=!1),e})()&&E()},className:S.loading?"button-total-disabled":"button-total",children:"Confirmar"}),(0,t.jsxs)(s.ZP.Container,{gap:2,direction:"column",justify:"center",children:[S.loading&&(0,t.jsx)(p.ZP,{color:"warning"}),S.done&&S.error&&(0,t.jsx)(f.Z,{children:S.error})]})]})},j=r(8754);function g(e,n,r,t,o,i,s){try{var c=e[i](s),a=c.value}catch(u){return void r(u)}c.done?n(a):Promise.resolve(a).then(t,o)}var y=function(e){var n=e.ordersCount,r=e.setOrdersCount,c=(0,o.useState)({error:null,loading:!1,done:!1}),a=c[0],u=c[1],d=function(){var e,n=(e=l().mark((function e(){var n,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u({error:null,loading:!0,done:!1}),e.next=4,(0,j.g4)();case 4:return n=e.sent.orders,e.next=7,fetch("/api/admin/orders",{method:"POST",body:JSON.stringify({orders:n})});case 7:return t=e.sent,e.next=10,t.json();case 10:if(e.sent.error){e.next=15;break}r(0),u({error:null,loading:!1,done:!0}),e.next=16;break;case 15:throw new Error("Error enviando los pedidos");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),u({error:"Ocurri\xf3 un error enviando los pedidos",loading:!1,done:!0});case 21:case"end":return e.stop()}}),e,null,[[0,18]])})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function s(e){g(i,t,o,s,c,"next",e)}function c(e){g(i,t,o,s,c,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,t.jsxs)(i.Z,{children:[(0,t.jsxs)(s.ZP.Container,{justify:"center",direction:"column",alignItems:"center",children:[(0,t.jsx)(f.Z,{h3:!0,children:"Pedidos guardados hasta ahora (sin enviar)"}),(0,t.jsx)(f.Z,{h2:!0,children:n}),(0,t.jsx)(h.ZP,{onClick:d,className:a.loading?"button-total-disabled":"button-total",children:"Enviar pedidos"})]}),(0,t.jsxs)(s.ZP.Container,{gap:2,direction:"column",justify:"center",children:[a.loading&&(0,t.jsx)(p.ZP,{color:"warning"}),a.done&&(a.error?(0,t.jsx)(f.Z,{color:"error",children:a.error}):(0,t.jsx)(f.Z,{children:"Pedidos enviados con \xe9xito"}))]})]})},m=function(e){var n=e.status,r=e.setEditing;return(0,t.jsx)(i.Z,{children:(0,t.jsxs)(s.ZP.Container,{justify:"center",direction:"column",alignItems:"center",children:[(0,t.jsx)(f.Z,{h3:!0,children:"Estado actual del carrito"}),(0,t.jsx)(f.Z,{h4:!0,children:{open:"Abierto",toOpen:"Abre pronto",closed:"Cerrado"}[n.status]}),(0,t.jsxs)(s.ZP.Container,{justify:"space-around",children:[(0,t.jsx)(s.ZP,{children:(0,t.jsxs)(f.Z,{children:["Fecha de apertura: ",(0,t.jsx)("strong",{children:n.openDate})]})}),(0,t.jsx)(s.ZP,{children:(0,t.jsxs)(f.Z,{children:["Fecha de cierre: ",(0,t.jsx)("strong",{children:n.closeDate})]})})]}),(0,t.jsx)(h.ZP,{onClick:function(){return r(!0)},className:"button-total",children:"Editar fechas"})]})})},b=!0;function w(e){var n=(0,o.useState)(!1),r=n[0],u=n[1],l=(0,o.useState)(e.ordersCount),d=l[0],f=l[1],h=(0,o.useState)(e.currentStatus),p=h[0],x=h[1];return(0,t.jsxs)(c.default,{children:[(0,t.jsx)(a.Z,{user:e.user,title:"Panel de administrador"}),(0,t.jsx)(i.Z,{children:(0,t.jsxs)(s.ZP.Container,{justify:"center",alignItems:"center",gap:4,children:[(0,t.jsx)(s.ZP,{xs:12,sm:10,md:6,lg:4,children:(0,t.jsx)(y,{ordersCount:d,setOrdersCount:f})}),(0,t.jsx)(s.ZP,{xs:12,sm:10,md:6,lg:4,children:r?(0,t.jsx)(v,{setEditing:u,setCurrentStatus:x}):(0,t.jsx)(m,{status:p,setEditing:u})})]})})]})}},8366:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return p}});var t=r(5893),o=r(9008),i=r.n(o),s=r(9398),c=r(2814),a=r(2553),u=r(5328),l=r(4040),d=r(6979),f=r(7087);r(7294);function h(){var e=(new Date).getFullYear();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.ZP.Container,{css:{backgroundColor:"#F9F9F9",padding:25},children:[(0,t.jsx)(a.ZP,{xs:12,sm:12,md:3,lg:4,xl:4,children:(0,t.jsx)(u.ZP,{width:200,src:"/../../img/almargen.png"})}),(0,t.jsx)(a.ZP,{xs:12,sm:12,md:4,lg:4,xl:4,children:(0,t.jsxs)(l.Z,{css:{display:"block",marginTop:15},children:[(0,t.jsx)(d.Z,{css:{fontWeight:600},children:"\xbfC\xf3mo funciona?"}),(0,t.jsx)(d.Z,{children:"El carrito abre los Mi\xe9rcoles a partir de las 16 hs y cierra los pedidos el Domingo a las 23 hs."}),(0,t.jsx)(d.Z,{children:"Podes pasar a buscar tu pedido los Lunes y Martes de 8 a 16 hs por Mitre 8400."})]})}),(0,t.jsx)(a.ZP,{xs:12,sm:12,md:4,lg:4,xl:4,children:(0,t.jsxs)(l.Z,{css:{display:"block"},children:[(0,t.jsx)(d.Z,{css:{fontWeight:600},children:"Contactanos"}),(0,t.jsx)(d.Z,{children:"Por dudas o consultas de tus pedidos podes escribirnos por mail o conicarte por WhatsApp."}),(0,t.jsxs)(f.ZP,{block:!0,href:"#",className:"link-container link-container-black",underline:!0,children:["mail@mail.com.ar  ",(0,t.jsx)(c.G,{style:{marginLeft:12},icon:s.eFW})]})]})})]}),(0,t.jsx)("div",{style:{display:"flex",backgroundColor:"#333333",justifyContent:"center",paddingBottom:17,paddingTop:17,width:"100%",height:"100%",marginBottom:0},children:(0,t.jsxs)(d.Z,{css:{color:"white",fontSize:15},children:["\xa9 Copyright - ",e," Al Margen compras comunitarias"]})})]})}var p=function(e){var n=e.children;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i(),{children:[(0,t.jsx)("title",{children:"AlMargen | Del otro lado de tu mesa"}),(0,t.jsx)("meta",{content:"width=device-width, initial-scale=1.0",name:"viewport"})]}),(0,t.jsxs)("div",{children:[n,(0,t.jsx)(h,{})]})]})}}},function(e){e.O(0,[523,793,710,218,835,774,888,179],(function(){return n=577,e(e.s=n);var n}));var n=e.O();_N_E=n}]);