(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{1742:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return r(3811)}])},8277:function(t,e,r){"use strict";r.d(e,{Z:function(){return p}});var n=r(5893),o=(r(7294),r(7690)),c=r(189),s=r(6979),i=r(1163);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){a(t,e,r[e])}))}return t}function u(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},c=Object.keys(t);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);for(n=0;n<c.length;n++)r=c[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}var d=function(t){var e=t.fill,r=void 0===e?"currentColor":e,o=t.size,c=t.height,s=t.width,i=u(t,["fill","size","height","width"]);return(0,n.jsx)("div",{style:{cursor:"pointer"},children:(0,n.jsxs)("svg",l({width:o||s||24,height:o||c||24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i,{children:[(0,n.jsx)("path",{d:"M16.25 22.5C17.2165 22.5 18 21.7165 18 20.75C18 19.7835 17.2165 19 16.25 19C15.2835 19 14.5 19.7835 14.5 20.75C14.5 21.7165 15.2835 22.5 16.25 22.5Z",fill:r}),(0,n.jsx)("path",{d:"M8.25 22.5C9.2165 22.5 10 21.7165 10 20.75C10 19.7835 9.2165 19 8.25 19C7.2835 19 6.5 19.7835 6.5 20.75C6.5 21.7165 7.2835 22.5 8.25 22.5Z",fill:r}),(0,n.jsx)("path",{d:"M4.84 3.94L4.64 6.39C4.6 6.86 4.97 7.25 5.44 7.25H20.75C21.17 7.25 21.52 6.93 21.55 6.51C21.68 4.74 20.33 3.3 18.56 3.3H6.27C6.17 2.86 5.97 2.44 5.66 2.09C5.16 1.56 4.46 1.25 3.74 1.25H2C1.59 1.25 1.25 1.59 1.25 2C1.25 2.41 1.59 2.75 2 2.75H3.74C4.05 2.75 4.34 2.88 4.55 3.1C4.76 3.33 4.86 3.63 4.84 3.94Z",fill:r}),(0,n.jsx)("path",{d:"M20.5101 8.75H5.17005C4.75005 8.75 4.41005 9.07 4.37005 9.48L4.01005 13.83C3.87005 15.54 5.21005 17 6.92005 17H18.0401C19.5401 17 20.8601 15.77 20.9701 14.27L21.3001 9.6C21.3401 9.14 20.9801 8.75 20.5101 8.75Z",fill:r})]}))})},f=r(2814),h=r(9398),p=function(t){var e=t.title,r=t.user,a=t.cart,l=(0,i.useRouter)();return(0,n.jsxs)("div",{className:"header",children:[r.logged&&(0,n.jsxs)("div",{className:"buttons-container",children:[(0,n.jsx)("div",{children:(0,n.jsx)(f.G,{onClick:function(){return l.push("/")},size:"lg",icon:h.wzO,style:{color:"white"}})}),(0,n.jsxs)("div",{className:"sessions-buttons",children:[(0,n.jsxs)(o.ZP,{className:"logout-button",onClick:function(){return l.push("/api/logout")},children:["Cerrar Session (",r.name,")"]}),a&&(0,n.jsx)(c.ZP,{css:{cursor:"pointer"},color:"warning",content:a.products.length,shape:"circle",children:(0,n.jsx)(d,{fill:"white",size:30,width:24,height:24,onClick:function(){return l.push("/cart")}})})]})]}),(0,n.jsx)(s.Z,{className:"header-text",children:e})]})}},8662:function(t,e,r){"use strict";r.d(e,{o:function(){return o}});var n=r(5678),o=function(){switch(location.href.split("#")[1]){case"logout":n.Am.info("Se ha deslogeado");break;case"logged":n.Am.success("Inicio de sesion exitoso!");break;case"unauthorized":n.Am.error("No se encuentra autorizado")}}},3811:function(t,e,r){"use strict";r.r(e),r.d(e,{__N_SSP:function(){return w},default:function(){return P}});var n=r(4051),o=r.n(n),c=r(5893),s=r(8366),i=r(8277),a=r(3165),l=r(2553),u=r(7690),d=r(7294),f=r(9372),h=r(6979),p=r(2814),m=r(9398),x=function(t){var e=t.product,r=t.deleteProduct,n=t.addProduct,o=(0,d.useState)(e.qty),s=o[0],i=o[1];return(0,c.jsxs)("div",{className:"product-cart",children:[(0,c.jsx)("div",{className:"product-image-container",children:(0,c.jsx)(f.ZP,{src:e.picture,size:"xl"})}),(0,c.jsxs)("div",{className:"title-buttons",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)(h.Z,{className:"product-name",children:e.name}),(0,c.jsx)("small",{className:"product-description",children:e.minimum})]}),(0,c.jsxs)("div",{className:"product-buttons",children:[(0,c.jsx)(h.Z,{className:"quantity-border",onClick:function(){s>1&&(i((function(t){return t-1})),n(e,s-1))},children:"-"}),(0,c.jsx)(h.Z,{className:"quantity",children:s}),(0,c.jsx)(h.Z,{className:"quantity-border",onClick:function(){i((function(t){return t+1})),n(e,s+1)},children:"+"})]})]}),(0,c.jsxs)("div",{className:"button-price",children:[(0,c.jsx)(p.G,{style:{cursor:"pointer"},icon:m.$aW,onClick:function(){return r(e)}}),(0,c.jsxs)(h.Z,{className:"product-price",children:["$",e.total.toFixed(2)]})]})]})},j=function(t){var e=t.total;return(0,c.jsxs)("div",{className:"total-cart",children:[(0,c.jsxs)("div",{className:"total-items",children:[(0,c.jsx)(h.Z,{className:"items-text",children:"Subtotal"}),(0,c.jsxs)(h.Z,{className:"items-text",children:["$",e.toFixed(2)]})]}),(0,c.jsx)("div",{className:"divider"}),(0,c.jsxs)("div",{className:"total-items",children:[(0,c.jsx)(h.Z,{className:"total-text",children:"Total"}),(0,c.jsxs)(h.Z,{className:"total-text",children:["$",e.toFixed(2)]})]})]})},g=r(961),v=r(1163),b=r(8662);function y(t,e,r,n,o,c,s){try{var i=t[c](s),a=i.value}catch(l){return void r(l)}i.done?e(a):Promise.resolve(a).then(n,o)}function C(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var w=!0;function P(t){var e=null!==t.orderId,r=(0,g.j)(t.cart),n=(0,v.useRouter)();(0,d.useEffect)((function(){return(0,b.o)()}),[]);var f=function(){var c,s=(c=o().mark((function c(){return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,console.log(e),!e){o.next=7;break}return o.next=5,fetch("/api/orders/".concat(t.orderId),{method:"PUT",body:JSON.stringify({products:r.Cart.products})});case 5:o.next=9;break;case 7:return o.next=9,fetch("/api/orders",{method:"POST",body:JSON.stringify({products:r.Cart.products})});case 9:r.removeCart(),n.push("/#orderstored"),o.next=16;break;case 13:o.prev=13,o.t0=o.catch(0),console.warn("error on saving order",o.t0);case 16:case"end":return o.stop()}}),c,null,[[0,13]])})),function(){var t=this,e=arguments;return new Promise((function(r,n){var o=c.apply(t,e);function s(t){y(o,r,n,s,i,"next",t)}function i(t){y(o,r,n,s,i,"throw",t)}s(void 0)}))});return function(){return s.apply(this,arguments)}}();return(0,c.jsx)(s.default,function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable})))),n.forEach((function(e){C(t,e,r[e])}))}return t}({},t,{children:t.user.logged&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(i.Z,{user:t.user,title:e?"Edita tu pedido":"Tu carrito",cart:r.Cart}),(0,c.jsx)(a.Z,{children:(0,c.jsx)(l.ZP.Container,{justify:"center",gap:2,children:(0,c.jsxs)(l.ZP,{direction:"column",xs:12,sm:12,md:4,xl:8,lg:8,children:[r.Cart.products.map((function(t){return(0,c.jsx)(x,{deleteProduct:function(t){return r.removeProduct(t)},addProduct:function(t,e){return r.addProduct(t,e)},product:t},t.code)})),(0,c.jsx)(j,{total:r.Cart.total}),(0,c.jsx)(u.ZP,{disabled:r.Cart.products.length<0,className:"".concat(r.Cart.products.length>0?"button-total":"button-total-disabled"),onClick:f,children:e?"Modificar pedido":"Realizar pedido"})]})})})]})}))}},8366:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return p}});var n=r(5893),o=r(9008),c=r.n(o),s=r(9398),i=r(2814),a=r(2553),l=r(5328),u=r(4040),d=r(6979),f=r(7087);r(7294);function h(){var t=(new Date).getFullYear();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.ZP.Container,{css:{backgroundColor:"#F9F9F9",padding:25},gap:2,children:[(0,n.jsx)(a.ZP,{xs:12,sm:12,md:3,lg:4,xl:4,children:(0,n.jsx)(l.ZP,{width:200,src:"/../../img/almargen.png"})}),(0,n.jsx)(a.ZP,{xs:12,sm:12,md:4,lg:4,xl:4,children:(0,n.jsxs)(u.Z,{css:{display:"block",marginTop:15},children:[(0,n.jsx)(d.Z,{css:{fontWeight:600},children:"\xbfC\xf3mo funciona?"}),(0,n.jsx)(d.Z,{children:"El carrito abre los Mi\xe9rcoles a partir de las 16 hs y cierra los pedidos el Domingo a las 23 hs."}),(0,n.jsx)(d.Z,{children:"Podes pasar a buscar tu pedido los Lunes y Martes de 8 a 16 hs por Mitre 8400."})]})}),(0,n.jsx)(a.ZP,{xs:12,sm:12,md:4,lg:4,xl:4,children:(0,n.jsxs)(u.Z,{css:{display:"block"},children:[(0,n.jsx)(d.Z,{css:{fontWeight:600},children:"Contactanos"}),(0,n.jsx)(d.Z,{children:"Por dudas o consultas de tus pedidos podes escribirnos por mail o conicarte por WhatsApp."}),(0,n.jsxs)(f.ZP,{block:!0,href:"#",className:"link-container link-container-black",underline:!0,children:["mail@mail.com.ar  ",(0,n.jsx)(i.G,{style:{marginLeft:12},icon:s.eFW})]})]})})]}),(0,n.jsx)("div",{style:{display:"flex",backgroundColor:"#333333",justifyContent:"center",paddingBottom:17,paddingTop:17,width:"100%",height:"100%",marginBottom:0},children:(0,n.jsxs)(d.Z,{css:{color:"white",fontSize:15},children:["\xa9 Copyright - ",t," Al Margen compras comunitarias"]})})]})}var p=function(t){var e=t.children;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(c(),{children:[(0,n.jsx)("title",{children:"AlMargen | Del otro lado de tu mesa"}),(0,n.jsx)("meta",{content:"width=device-width, initial-scale=1.0",name:"viewport"})]}),(0,n.jsxs)("div",{children:[e,(0,n.jsx)(h,{})]})]})}},961:function(t,e,r){"use strict";r.d(e,{j:function(){return o}});var n=r(7294);function o(t){var e=(0,n.useState)({products:[],total:0}),r=e[0],o=e[1],c=function(t){var e=0;return t.map((function(t){return e+=t.total})),e},s=function(t,e){var n={code:t.code,name:t.name,qty:e,price:t.price,minimum:t.minimum,total:t.price*e,picture:t.picture},o=r.products;o.find((function(t){return t.code==n.code}))?o=o.map((function(t){return t.code==n.code?n:t})):o.push(n),i(o)},i=function(t){o({total:c(t),products:t}),localStorage.setItem("cart",JSON.stringify({total:c(t),products:t}))};return(0,n.useEffect)((function(){var e=localStorage.getItem("cart"),r=[];if(e){var n=JSON.parse(e);r=r.concat(n.products)}t&&t.products&&(r=r.concat(t.products)),r.map((function(t){return s(t,t.qty)}))}),[]),{Cart:r,addProduct:s,removeProduct:function(t){var e=r.products.filter((function(e){return e.code!==t.code}));i(e)},removeCart:function(){o({products:[],total:0}),localStorage.removeItem("cart")},updateProducts:i,getCartProductQty:function(t){var e=r.products.find((function(e){return e.code===t}));return e?e.qty:1}}}}},function(t){t.O(0,[523,793,710,22,774,888,179],(function(){return e=1742,t(t.s=e);var e}));var e=t.O();_N_E=e}]);